<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Example">
	
	
	<select id="Example_SearchKioskTree" parameterType="hashmap" resultType="hashmap">
		/* 
		  ID  : example_sql.Example_SearchKioskTree
		  DEC : 좌측 단말기 트리 조회
		*/
		SELECT  '1' AS DEPTH
		      , 'DOMAIN' AS DEPTH_NAME
		      , DOMAIN_IDX AS IDX
		      , DOMAIN_NAME AS NAME
		      , '0' AS PARENT_IDX
		      , '0' AS CHECKED
		FROM DOMAIN
		UNION ALL
		SELECT  '2'
		      , 'BRAND'
		      , CONCAT(DOMAIN_IDX, '_', BRAND_IDX)
		      , NAME
		      , DOMAIN_IDX
		      , '0'
		FROM    BRAND
		WHERE   ifnull(DEL_YN, 'N') = 'N'
		UNION ALL
		SELECT  '3'
		     , 'FRANCHISEE'
		     , CONCAT(DOMAIN_IDX, '_', BRAND_IDX, '_', FRANC_IDX)
		     , FRANC_NAME
		     , CONCAT(DOMAIN_IDX, '_', BRAND_IDX)
		     , '0' 
		FROM   FRANCHISEE
		WHERE  ifnull(DEL_YN, 'N') = 'N'
		UNION ALL
		SELECT  '4'
		     , 'KIOSK'
		     , CONCAT(DOMAIN_IDX, '_', BRAND_IDX, '_', FRANC_IDX, '_', kiosk.DEVICE_IDX)
		     , DEVICE_NAME
		     , CONCAT(DOMAIN_IDX, '_', BRAND_IDX, '_', FRANC_IDX)
		     , '1'
		FROM   KIOSK
		WHERE  ifnull(DEL_YN, 'N') = 'N'
	</select>
</mapper>